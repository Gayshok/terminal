<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TERMINAL №2062</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: radial-gradient(circle, #003300 50%, black 100%);
    color: rgb(105,211,105);
    font-family: monospace;
    font-size: 16px;
    overflow: hidden;
    position: relative;
  }
  #terminal {
    padding: 10px 20px;
    white-space: pre-wrap;
    line-height: 1.2;
    text-align: left;
    width: 80%;
    max-width: 800px;
    position: relative;
    z-index: 2;
  }
  .centered {
    text-align: center;
  }
  .bold-centered {
    text-align: center;
    font-weight: bold;
    display: block;
  }
  #sonar {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    overflow: hidden;
  }
  .scanline {
    position: absolute;
    top: -5%;
    left: 0;
    width: 100%;
    height: 5%;
    background: linear-gradient(to bottom, rgba(105,211,105,0.3), rgba(105,211,105,0));
    animation: scan 6s linear infinite;
  }
  @keyframes scan {
    0% { top: -5%; }
    100% { top: 100%; }
  }
  #openCell {
    display: none;
    margin-top: 15px;
    color: rgb(105,211,105);
    cursor: pointer;
    text-align: left;
    position: relative;
    z-index: 2;
    text-decoration: none;
    padding: 2px 4px;
    transition: background-color 0.3s, color 0.3s;
  }
  #openCell:hover {
    background-color: rgba(105,211,105,0.2);
    text-decoration: underline;
  }
  #openCell:hover::before {
    content: "> ";
  }
  #header {
    text-align: center;
    margin-bottom: 0.5em;
  }
  #header .underlined {
    text-decoration: underline;
    font-weight: normal;
  }
</style>
</head>
<body>
<div id="terminal">
  <div id="header">
    <span class="underlined">Терминал №2062</span><br>
    ------<br>
    ЗАПРОС НА ВХОД ПРИНЯТ<br>
    ------<br>
  </div>
</div>

<div id="sonar">
  <div class="scanline"></div>
</div>

<div id="openCell" onclick="window.open('https://docs.google.com/document/d/1VDv8z8wEA4EgCDlLysJ9O-zUoYiR2yKIPPS4PAmVsIY/edit?usp=sharing', '_blank')">
  Открыть ячейку
</div>

<script>
const terminal = document.getElementById('terminal');
const openCell = document.getElementById('openCell');

const lines = [
  { text: "C:\\YANJINGNET\\CH137>", type: "prefix" },
  { text: " dbSearch", type: "typewrite" },
  { text: "", type: "empty" },
  { text: "Выбрано dbSearch [ПОИСК ПО БАЗЕ ДАННЫХ]", type: "instant" },
  { text: "| Загрузка...", type: "instant" },
  { text: "", type: "empty" },
  { text: "progress", type: "progress" },
  { text: "", type: "empty" },
  { text: "| ПОДКЛЮЧЕНО!", type: "instant" },
  { text: "'Поиск по (Т)егу' или по 'Поисковой (Ф)разе'? Выберите (Т/Ф) ", type: "bold_centered" },
  { text: "> sudo cd [28SD-715-315]", type: "typewrite" },
  { text: "| Пароль:  ", type: "instant_inline" },
  { text: "[ !A7F219C4 ]", type: "typewrite_inline" },
  { text: "Пожалуйста, подождите... ", type: "instant_center" },
  { text: "ДОСТУП ПРЕДОСТАВЛЕН ", type: "instant_center" }
];

let lineIndex = 0;
let charIndex = 0;
let currentLineDiv = null;
let loadingPercent = 0;
let loadingLineDiv = null;
const totalBlocks = 40;

function typeNextLine() {
  if(lineIndex >= lines.length) {
    openCell.style.display = 'block';
    return;
  }

  const line = lines[lineIndex];

  // стандартный интервал 1 секунда
  let interval = 1000;

  // особый интервал 3 секунды после "Выбрано dbSearch..."
  if(line.text.includes("Выбрано dbSearch")) {
    interval = 3000;
  }

  if(line.type === "prefix") {
    currentLineDiv = document.createElement('div');
    currentLineDiv.textContent = line.text;
    terminal.appendChild(currentLineDiv);
    lineIndex++;
    setTimeout(typeNextLine, interval);
  } else if(line.type === "typewrite" || line.type === "typewrite_inline") {
    if(charIndex === 0 && !currentLineDiv) {
      currentLineDiv = document.createElement('div');
      terminal.appendChild(currentLineDiv);
    }
    currentLineDiv.textContent += line.text.charAt(charIndex);
    charIndex++;
    if(charIndex <= line.text.length) {
      setTimeout(typeNextLine, 120 + Math.random() * 50);
    } else {
      charIndex = 0;
      currentLineDiv = null;
      lineIndex++;
      setTimeout(typeNextLine, interval);
    }
  } else if(line.type === "instant") {
    const div = document.createElement('div');
    div.textContent = line.text;
    terminal.appendChild(div);
    lineIndex++;
    setTimeout(typeNextLine, interval);
  } else if(line.type === "instant_inline") {
    currentLineDiv = document.createElement('div');
    currentLineDiv.textContent = line.text;
    terminal.appendChild(currentLineDiv);
    lineIndex++;
    setTimeout(typeNextLine, interval);
  } else if(line.type === "instant_center") {
    const div = document.createElement('div');
    div.className = "centered";
    div.textContent = line.text;
    terminal.appendChild(div);
    lineIndex++;
    setTimeout(typeNextLine, interval);
  } else if(line.type === "bold_centered") {
    const div = document.createElement('div');
    div.className = "bold-centered";
    div.textContent = line.text;
    terminal.appendChild(div);
    lineIndex++;
    setTimeout(typeNextLine, interval);
  } else if(line.type === "empty") {
    const div = document.createElement('div');
    div.textContent = "";
    terminal.appendChild(div);
    lineIndex++;
    setTimeout(typeNextLine, interval);
  } else if(line.type === "progress") {
    if(!loadingLineDiv) {
      loadingLineDiv = document.createElement('div');
      terminal.appendChild(loadingLineDiv);
    }
    loadingPercent += Math.floor(Math.random() * 3) + 1;
    if(loadingPercent > 100) loadingPercent = 100;
    const blocks = Math.floor((loadingPercent / 100) * totalBlocks);
    const progressBar = '█'.repeat(blocks) + ' '.repeat(totalBlocks - blocks);
    loadingLineDiv.textContent = `${progressBar} ${loadingPercent}%`;
    if(loadingPercent < 100) {
      setTimeout(typeNextLine, 150 + Math.random() * 50);
    } else {
      lineIndex++;
      setTimeout(typeNextLine, interval);
    }
  }
}

window.onload = () => {
  setTimeout(typeNextLine, 1000);
};
</script>
</body>
</html>

